(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){},4:function(e,t,a){e.exports=a.p+"static/media/logo.3e6893cd.svg"},5:function(e,t,a){e.exports=a.p+"static/media/profile-edit.d476a8b8.svg"},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(3),o=a.n(l),c=(a(14),a(8)),i=a(1);var u=function(e){var t=e.isOpen?" popup_opened":"";return r.a.createElement("div",{className:"popup popup_type_".concat(e.name," ").concat(t)},r.a.createElement("button",{"aria-label":"close popup",className:"popup__close popup__close_place_profile button button_opacity_m",onClick:e.close}),r.a.createElement("div",{className:"popup__container"},r.a.createElement("h2",{className:"popup__title"},e.title),r.a.createElement("form",{action:"#",className:"popup__form popup__form_type_".concat(e.name),name:e.formName,onSubmit:e.onSubmit},r.a.createElement("fieldset",{className:"popup__form-set"},e.children,r.a.createElement("button",{type:"submit",className:"popup__submit-btn button button_opacity_h popup__submit-btn_place_".concat(e.name)},e.lable)))))};var p=function(e){var t=e.selectedCard.isCardOpen?" popup_opened":"";return r.a.createElement("div",{className:"popup popup_type_img ".concat(t),onClick:e.click},r.a.createElement("div",{className:"popup__img-container"},r.a.createElement("button",{"aria-label":"close popup",className:"popup__close popup__close_place_img button button_opacity_m",onClick:e.close}),r.a.createElement("img",{src:e.selectedCard.link,alt:"popup img",className:"popup__img"}),r.a.createElement("p",{className:"popup__img-title"},e.selectedCard.title)))},s=a(4),m=a.n(s);var _=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:m.a,alt:"Around The U.S. logo",className:"header__logo"}))},d=r.a.createContext();var f=function(e){var t=r.a.useContext(d),a=e.card,n=a.owner._id===t._id,l="".concat(n?"gallery__item-trash-btn_visible":" gallery__item-trash-btn_hidden"),o="".concat(e.isLiked?"gallery__like-btn_active":"gallery__like-btn");return r.a.createElement("div",{id:a.id},r.a.createElement("li",{className:"gallery__item"},r.a.createElement("button",{"aria-label":"trash button",type:"button",className:"".concat(l," button button_clear"),onClick:function(){return e.onCardDelete(a)}}),r.a.createElement("img",{src:a.link,className:"gallery__item-img",onClick:function(){return e.click({link:a.link,name:a.name})},alt:a.name}),r.a.createElement("div",{className:"gallery__item-footer"},r.a.createElement("h2",{className:"gallery__item-name"},a.name),r.a.createElement("div",{className:"gllery__like"},r.a.createElement("button",{"aria-label":"like button",type:"button",className:"".concat(o," button button_clear"),onClick:function(){return e.onCardLike(a)}}),r.a.createElement("p",{className:"gllery__like-count"},a.likes.length)))))},b=a(5),v=a.n(b);var E=function(e){var t=Object(n.useContext)(d);return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("p",{className:"profile__error"}),r.a.createElement("div",{className:"profile__info"},r.a.createElement("div",{className:"profile__img"},r.a.createElement("img",{className:"profile__avatar",src:t.avatar,alt:"avatar"}),r.a.createElement("img",{className:"profile__edit-avatar",src:v.a,alt:"edit profile",onClick:e.onEditAvatarClick})),r.a.createElement("div",{className:"profile__text"},r.a.createElement("h1",{className:"profile__name"},t.name),r.a.createElement("p",{className:"profile__about-me"},t.about),r.a.createElement("button",{"aria-label":"edit profile",type:"button",className:"profile__edit-btn button button_clear button_open button_opacity_m button_border_sm",onClick:e.onEditProfileClick}))),r.a.createElement("button",{"aria-label":"add profile",type:"button",className:"profile__add-btn button button_clear button_open button_opacity_m button_border_m",onClick:e.onAddPlaceClick})),r.a.createElement("section",{className:"gallery"},r.a.createElement("ul",{className:"gallery__list"},e.cards.map(function(a){var n=a.likes.some(function(e){return e._id===t._id});return r.a.createElement(f,{click:e.onCardClick,card:a,key:a._id,onCardLike:e.onCardLike,isLiked:n,onCardDelete:e.onCardDelete})}))))};var h=function(){var e=(new Date).getFullYear();return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__author"},"\xa9 ",e," Around The U.S."))},g=a(6),k=a(7),C=function(){function e(t){var a=this;Object(g.a)(this,e),this.getInitialCards=function(){return a._call("/cards","GET")},this.getUserData=function(){return a._call("/users/me","GET")},this.addLike=function(e){return a._call("/cards/likes/".concat(e),"PUT")},this.deleteLike=function(e){return a._call("/cards/likes/".concat(e),"DELETE")},this.changeLikeCardStatus=function(e,t){return t?a._call("/cards/likes/".concat(e),"PUT"):a._call("/cards/likes/".concat(e),"DELETE")},this.deleteCard=function(e){return a._call("/cards/".concat(e),"DELETE")},this._options=t}return Object(k.a)(e,[{key:"_call",value:function(e,t,a){return fetch(this._options.baseUrl+e,{method:t,headers:this._options.headers,body:JSON.stringify(a)}).then(function(e){return e.ok?e.json():Promise.reject(e.status)})}},{key:"editProfile",value:function(e){var t=e.name,a=e.about;return this._call("/users/me","PATCH",{name:t,about:a})}},{key:"createNewCard",value:function(e,t){return this._call("/cards","POST",{name:t,link:e})}},{key:"editProfileAvatar",value:function(e){return this._call("/users/me/avatar ","PATCH",{avatar:e})}},{key:"init",value:function(){return Promise.all([this.getUserData(),this.getInitialCards()])}}]),e}(),N=new C({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"9b621f0f-5dfe-43f1-95fd-e9cc188bcc35","Content-Type":"application/json"}});new C;var O=function(e){var t=r.a.useContext(d),a=Object(n.useState)(""),l=Object(i.a)(a,2),o=l[0],c=l[1],p=Object(n.useState)({}),s=Object(i.a)(p,2),m=s[0],_=s[1];return Object(n.useEffect)(function(){c(t.name),_(t.about)},[t]),r.a.createElement(u,{title:"Edit profile",name:"profile",lable:"Save",isOpen:e.isOpen,close:e.onClose,formName:"profileForm",onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:m})}},r.a.createElement("input",{id:"profile-name-input",required:!0,className:"popup__input popup__input-text popup__input-text_type_name",type:"text",placeholder:"name",value:o||"",name:"profileName",minLength:"2",maxLength:"40",onChange:function(e){return c(e.currentTarget.value)}}),r.a.createElement("span",{className:"popup__input-error profile-name-input-error"}),r.a.createElement("input",{id:"profile-about-me-input",required:!0,className:"popup__input popup__input-text popup__input-text_type_about-me",type:"text",placeholder:"About me",value:m||"",name:"profileAboutMe",minLength:"2",maxLength:"400",onChange:function(e){return _(e.currentTarget.value)}}),r.a.createElement("span",{className:"popup__input-error profile-about-me-input-error"}))};var y=function(e){var t=Object(n.useRef)(null);return r.a.createElement(u,{title:"Change profile picture",name:"avatar",lable:"Save",isOpen:e.isOpen,close:e.onClose,formName:"avatarForm",onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})}},r.a.createElement("input",{ref:t,id:"avatar-link-input",className:"popup__input popup__input-text popup__input-text_type_avatar-link",required:!0,type:"url",placeholder:"Avatar link",name:"avatarImageLink"}),r.a.createElement("span",{className:"popup__input-error avatar-link-input-error"}))};var j=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),p=Object(i.a)(c,2),s=p[0],m=p[1];return r.a.createElement(u,{title:"New place",name:"new-card",lable:"Save",isOpen:e.isOpen,close:e.onClose,formName:"newCardForm",onSubmit:function(t){t.preventDefault(),e.onAddPlace({link:s,name:l})}},r.a.createElement("input",{id:"card-title-input",className:"popup__input popup__input-text popup__input-text_type_title",required:!0,type:"text",placeholder:"Title",name:"placeName",minLength:"2",maxLength:"30",onChange:function(e){return o(e.currentTarget.value)}}),r.a.createElement("span",{className:"popup__input-error card-title-input-error"}),r.a.createElement("input",{id:"card-link-input",className:"popup__input popup__input-text popup__input-text_type_Image-link",required:!0,type:"url",placeholder:"Image link",name:"placeImageLink",onChange:function(e){return m(e.currentTarget.value)}}),r.a.createElement("span",{className:"popup__input-error card-link-input-error"}))};var S=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),m=s[0],f=s[1],b=Object(n.useState)(!1),v=Object(i.a)(b,2),g=v[0],k=v[1],C=Object(n.useState)({}),S=Object(i.a)(C,2),P=S[0],x=S[1],L=Object(n.useState)({}),A=Object(i.a)(L,2),T=A[0],w=A[1],D=Object(n.useState)([]),U=Object(i.a)(D,2),F=U[0],I=U[1];Object(n.useEffect)(function(){N.init().then(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];w(a),I(n)}).catch(function(e){console.log(e)})},[]);var q=function(){k(!1),l(!1),f(!1),x({isCardOpen:!1,link:""})};return r.a.createElement("div",{className:"app"},r.a.createElement(d.Provider,{value:T},r.a.createElement(O,{isOpen:a,onClose:q,onUpdateUser:function(e){N.editProfile(e).then(function(e){w(e),q()}).catch(function(e){console.log(e)})}}),r.a.createElement(y,{isOpen:g,onClose:q,onUpdateAvatar:function(e){N.editProfileAvatar(e.avatar).then(function(e){w(e),q()}).catch(function(e){console.log(e)})}}),r.a.createElement(j,{isOpen:m,onClose:q,onAddPlace:function(e){N.createNewCard(e.link,e.name).then(function(e){I([e].concat(Object(c.a)(F))),q()}).catch(function(e){console.log(e)})}}),r.a.createElement(u,{title:"Are you sure?",name:"delete",lable:"Yes",isOpen:!1,close:q,formName:"deleteForm"}),r.a.createElement(p,{selectedCard:P,close:q}),r.a.createElement(_,null),r.a.createElement(E,{onEditProfileClick:function(){l(!0)},onAddPlaceClick:function(){f(!0)},onEditAvatarClick:function(){k(!0)},onCardClick:function(e){var t=e.link,a=e.name;x({isCardOpen:!0,link:t,title:a})},onCardLike:function(e){var t=e.likes.some(function(e){return e._id===T._id});N.changeLikeCardStatus(e._id,!t).then(function(t){I(function(a){return a.map(function(a){return a._id===e._id?t:a})})}).catch(function(e){console.log(e)})},onCardDelete:function(e){N.deleteCard(e._id).then(function(){I(F.filter(function(t){return t._id!==e._id}))}).catch(function(e){console.log(e)})},isEditProfilePopupOpen:a,isAddPlacePopupOpen:m,isEditAvatarPopupOpen:g,selectedCard:P,cards:F}),r.a.createElement(h,null)))},P=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,70)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,l=t.getLCP,o=t.getTTFB;a(e),n(e),r(e),l(e),o(e)})};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),P()},9:function(e,t,a){e.exports=a(69)}},[[9,3,2]]]);
//# sourceMappingURL=main.c3a45b88.chunk.js.map